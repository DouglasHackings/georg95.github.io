<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
<title>Gyroscope test</title>
</head>

<body>
<p id="warning"></p>
<p id="coords"></p>
<button id="button">Lock orientation and set fullscreen#2</button>
<script>
    var initialX = null;
    var initialY = null;

    var coords = document.getElementById('coords');
    function handleOrientationEvent(event)
    	{

        var x = event.beta ? event.beta : event.y * 90;
        var y = event.gamma ? event.gamma : event.x * 90;
        window.console && console.info('Raw position: x, y: ', x, y);

        if (!initialX && !initialY)
        	{
            initialX = x;
            initialY = y;
        	}
        else
        	{
            var positionX = initialX - x;
            var positionY = initialY - y;

            coords.innerHTML  = 'Gyroscope: x='+positionX.toFixed(1)+'; ';
            coords.innerHTML += 'y='+positionY.toFixed(1);
        	}
    	}

    function isEventFired()
    	{
        if (!initialX && !initialY)
        	{
            var warningElement = document.getElementById('warning');
            warningElement.innerHTML = 'Warning: Cannot receive device orientation events, this browser is not supported.';
        	}
    	}

    window.addEventListener("MozOrientation",    handleOrientationEvent, true);
    window.addEventListener("deviceorientation", handleOrientationEvent, true);
    setTimeout(isEventFired, 1000);
function enterFullscreen(e) {

	if (RunPrefixMethod(document, "FullScreen") || RunPrefixMethod(document, "IsFullScreen")) {
		RunPrefixMethod(document, "CancelFullScreen");
	}
	else {
		RunPrefixMethod(document.documentElement, "RequestFullScreen");
	}

}

var pfx = ["webkit", "moz", "ms", "o", ""];
function RunPrefixMethod(obj, method) {
	
	var p = 0, m, t;
	while (p < pfx.length && !obj[m]) {
		m = method;
		if (pfx[p] == "") {
			m = m.substr(0,1).toLowerCase() + m.substr(1);
		}
		m = pfx[p] + m;
		t = typeof obj[m];
		if (t != "undefined") {
			pfx = [pfx[p]];
			return (t == "function" ? obj[m]() : obj[m]);
		}
		p++;
	}

}
document.getElementById("button").addEventListener("click", function() {
		try {
		enterFullscreen();
		screen.orientation.lock("portrait-primary");
	  	}
	  catch(e) { alert("Cannot lock"); }
 }, false);
</script>
</body>

</html> 